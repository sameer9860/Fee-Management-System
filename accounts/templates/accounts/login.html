{% extends 'base.html' %}
{% load static %}
{% block sidebar %}
{% endblock %}

{% block content %}
<div class="w-full min-h-screen flex items-center justify-center p-4">

    <!-- Messages -->
    <div class="toast toast-end toast-top">
        {% for message in messages %}
        <div class="alert alert-error alert-soft">
            <span>{{message}}</span>
        </div>
        {% endfor %}
    </div>

    <!-- Login Form -->
    <form class="w-1/2 max-w-md flex flex-col p-6 border border-base-300 rounded-box bg-base-100 shadow-sm"
        method="post">
        {% csrf_token %}

        <div class="text-center mb-4">
            <img src="{% static 'images/fms logo.png' %}" alt="logo" class="w-16 h-16 mx-auto mb-2 rounded-full">
            <h1 class="text-2xl font-bold">Welcome back</h1>
            <p class="text-sm text-gray-500">Sign in to continue to FMS</p>
        </div>

        {% for field in form %}
        <fieldset class="fieldset mb-4 relative">
            <legend class="fieldset-legend">{{field.label}}</legend>

            {% if field.field.widget.input_type == "password" %}
            <div class="relative">
                {{ field }}

                <!-- Eye toggle button (Font Awesome). Starts invisible; becomes visible when typing -->
                <button type="button"
                    class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 toggle-password invisible"
                    aria-label="Toggle password visibility">
                    <i class="fa-solid fa-eye-slash toggle-icon text-lg"></i>
                </button>
            </div>
            {% else %}
                {{ field }}
            {% endif %}

            {{field.errors}}
        </fieldset>
        {% endfor %}

        <button class="w-full btn btn-primary" type="submit">Login</button>
        <a href="{% url 'accounts:school_admin_register' %}" class="mt-4 text-sm text-blue-500">
            Not a member? Click here to register
        </a>
        <a href="{% url 'accounts:forgot_password' %}" class="mt-4 text-sm text-blue-500">
            Forgot Password?
        </a>
    </form>
</div>

{% endblock %}
